<!DOCTYPE html>



  


<html class="theme-next gemini use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.2" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="Go, JavaScript, Ruby on Rails, Java,Docker, CI, CD, Photography" />








  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.1.2" />






<meta name="description" content="Go, JavaScript, Ruby on Rails, Java,Docker, CI, CD, Photography">
<meta property="og:type" content="website">
<meta property="og:title" content="大染志">
<meta property="og:url" content="http://toozhao.com/page/5/index.html">
<meta property="og:site_name" content="大染志">
<meta property="og:description" content="Go, JavaScript, Ruby on Rails, Java,Docker, CI, CD, Photography">
<meta property="og:locale" content="zh-Hans">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="大染志">
<meta name="twitter:description" content="Go, JavaScript, Ruby on Rails, Java,Docker, CI, CD, Photography">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Gemini',
    version: '5.1.2',
    sidebar: {"position":"left","display":"post","offset":12,"offset_float":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: true,
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://toozhao.com/page/5/"/>





  <title>大染志</title>
  




<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
            (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
          m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-5243064-16', 'auto');
  ga('send', 'pageview');
</script>





</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left 
   page-home 
 ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">大染志</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">想要玩得很 High 的程序员</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            关于
          </a>
        </li>
      
        
        <li class="menu-item menu-item-知识图谱">
          <a href="https://wiki.toozhao.com" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-question-circle"></i> <br />
            
            知识图谱
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://toozhao.com/2012/08/23/java-cors-cross-domain-request/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Junv">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="http://blog.tuxue.xyz/libr.jpg?imageView2/1/w/200/h/200/q/90|imageslim">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="大染志">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2012/08/23/java-cors-cross-domain-request/" itemprop="url">Java CORS实现Ajax跨域请求</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2012-08-23T00:00:00+10:00">
                2012-08-23
              </time>
            

            
              <span class="post-meta-divider">|</span>
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-check-o"></i>
              </span>
              
                <span class="post-meta-item-text">更新于&#58;</span>
              
              <time title="更新于" itemprop="dateModified" datetime="2014-07-22T18:51:50+10:00">
                2014-07-22
              </time>
            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/HTML5/" itemprop="url" rel="index">
                    <span itemprop="name">HTML5</span>
                  </a>
                </span>

                
                
                  ， 
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/HTML5/java/" itemprop="url" rel="index">
                    <span itemprop="name">java</span>
                  </a>
                </span>

                
                
                  ， 
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/HTML5/java/javascript/" itemprop="url" rel="index">
                    <span itemprop="name">javascript</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>跨域问题在我们开发web应用的时候经常遇到，但一直没有很好的解决方案。目前可能大家认为相对比较好使的就是——JSONP技术。不过这样前台通常需要告诉后台需要返回的函数名称，而后台需要向前台前台返回的则是一个可以执行的代码段。这样在后台处理的时候就相对麻烦一些。</p>
<p>其实在新的W3C标准中，我们只需要在服务器后端添加一句话即可以比较好的解决跨域问题。如java servlet中：</p>
<pre class="brush: java; title: ; notranslate" title="">response.setHeader("Access-Control-Allow-Origin","http://toozhao.com");

</pre>

<p>这段代码的意思就是，允许来自toozhao.com的跨域HTTP请求，当然我们也可以使用通配符 “*”,这样任意的请求都可以访问这个地址了，而不会出现跨域的问题。</p>
<p>不过据其他文档中介绍，这样做是不安全的。因为这样服务器不能访问document.cookie 对象。不知道请求者的相关信息，而微软的介绍文档中说到：</p>
<blockquote>
<p><strong>安全警报</strong>  为了保护用户数据，跨域请求是匿名的，这意味着服务器无法轻松找出正在请求数据的用户。 因此，只应请求和响应不属于敏感信息或个人身份识别信息的跨域数据。</p>
</blockquote>
<p>因此为了安全，我们只应该向我们能保证其安全的站点提供Access-Control-Allow-Origin，即（CORS）。或者对可以公开的数据采用该种方式。</p>
<p>我个人认为在下面的情景中，比较适合采用这种跨域处理技术：</p>
<p><a href="/images/2012/08/aa1.png"><img class="aligncenter size-full wp-image-2179" title="aa" src="/images/2012/08/aa1.png" alt="" width="622" height="432"></a></p>
<p>此外，CORS还有一些其他属性可以设置：</p>
<pre class="brush: xml; title: ; notranslate" title="">Access-Control-Allow-Origin: http://www.toozhao.com   //设置允许跨域的地址
Access-Control-Allow-Methods: POST, GET   //设置跨域允许的方法
Access-Control-Allow-Headers: NCZ      //设置跨域允许的头部信息
Access-Control-Max-Age: 1728000   //设置跨域允许的最大时间

</pre>

<p>好了有了上面的这些参数，只要我们在java 中可以获取到HttpServletResponse 对象，即可以设置属性。被允许的前台就可以使用一般的ajax调用了。如jquery：</p>
<pre class="brush: jscript; title: ; notranslate" title="">$.ajax({

url: 'http://toozhao.com/test/xxx',

method: 'GET'，

success: function(msg){

console.log(msg);

}

});

</pre>

<p>参考文档：<br><a href="http://huaidan.org/archives/2729.html" target="_blank" rel="external">http://huaidan.org/archives/2729.html</a><br><a href="http://msdn.microsoft.com/zh-cn/library/dd573303(v=vs.85).aspx" target="_blank" rel="external">http://msdn.microsoft.com/zh-cn/library/dd573303(v=vs.85).aspx</a></p>
<p>注：已修正图片中B系统URL错误。</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://toozhao.com/2012/08/16/java-web-define-error-page/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Junv">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="http://blog.tuxue.xyz/libr.jpg?imageView2/1/w/200/h/200/q/90|imageslim">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="大染志">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2012/08/16/java-web-define-error-page/" itemprop="url">java web.xml定义配置错误页面及使用</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2012-08-16T00:00:00+10:00">
                2012-08-16
              </time>
            

            
              <span class="post-meta-divider">|</span>
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-check-o"></i>
              </span>
              
                <span class="post-meta-item-text">更新于&#58;</span>
              
              <time title="更新于" itemprop="dateModified" datetime="2014-07-22T18:51:44+10:00">
                2014-07-22
              </time>
            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/java/" itemprop="url" rel="index">
                    <span itemprop="name">java</span>
                  </a>
                </span>

                
                
                  ， 
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/java/未分类/" itemprop="url" rel="index">
                    <span itemprop="name">未分类</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>我们在开发java web 的程序时候，经常会需要给用户提示信息，或者页面。最常见的，比如用户输入了一个不存在的网址，默认情况下Tomcat会给用户返回一个默认的页面。如下所示：</p>
<p><a href="/images/2012/08/22.jpg"><img class="aligncenter size-full wp-image-2165" title="22" src="/images/2012/08/22.jpg" alt="" width="529" height="182"></a></p>
<p>这个页面千篇一律。我们完全可以给用户展示一个自定义的页面。</p>
<p>其实java web程序中web.xml 本身就支持自定义错误页面，我们只需要在web.xml添加如下信息：</p>
<pre class="brush: xml; title: ; notranslate" title="">&lt;error-page&gt;
 &lt;error-code&gt;404&lt;/error-code&gt;
 &lt;location&gt;/errorpage/404.html&lt;/location&gt;
 &lt;/error-page&gt;
 &lt;error-page&gt;
 &lt;error-code&gt;401&lt;/error-code&gt;
 &lt;location&gt;/errorpage/401.html&lt;/location&gt;
 &lt;/error-page&gt;
 &lt;error-page&gt;
 &lt;error-code&gt;500&lt;/error-code&gt;
 &lt;location&gt;/errorpage/500.html&lt;/location&gt;
 &lt;/error-page&gt;

</pre>

<p>当然“error-code”，可以自己选择在程序中出现得最多的错误码。我个人认为通常我们拦截：</p>
<p>401：未授权</p>
<p>404：没有找到页面</p>
<p>500：服务器内部错误</p>
<p>这三个即可。在“location”中配置你自己的html,当然页面样式，内容这些这些都可以自己定义。这个就看你自己啦。</p>
<p>如果我们不做其他操作，当系统出现这些错误情况时，服务器就会自动调用我们配置的网页。当然我们可以自行在恰当的时候使用它。</p>
<p>在servlet或者其他可能访问到HttpServletResponse对象的地方，使用：</p>
<pre class="brush: java; title: ; notranslate" title="">response.sendError(404); //404为你需要的错误代码

//也可以向前台网页传输错误语句，不过前台网页需要相应支持。这里没有实现

response.sendError(404,"这里写想要输出到前台的提示信息");

</pre>

<p>在java中还可以使用：</p>
<pre class="brush: java; title: ; notranslate" title="">response.setStatus(404);  //设置状态码

</pre>

<p>设置状态码来实现，不过这并不能调用配置的自定义页面。只是在前台显示错误，并无输出。</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://toozhao.com/2012/08/14/java-upload-file-without-enctypemultipartform-data/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Junv">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="http://blog.tuxue.xyz/libr.jpg?imageView2/1/w/200/h/200/q/90|imageslim">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="大染志">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2012/08/14/java-upload-file-without-enctypemultipartform-data/" itemprop="url">java 服务器端实现HTTP无enctype=&#8221;multipart/form-data&#8221;文件上传</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2012-08-14T00:00:00+10:00">
                2012-08-14
              </time>
            

            
              <span class="post-meta-divider">|</span>
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-check-o"></i>
              </span>
              
                <span class="post-meta-item-text">更新于&#58;</span>
              
              <time title="更新于" itemprop="dateModified" datetime="2014-07-22T18:51:40+10:00">
                2014-07-22
              </time>
            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/java/" itemprop="url" rel="index">
                    <span itemprop="name">java</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>在java web中我们一般都是使用commons-fileupload 和cos 进行服务器端上传文件的处理，而这种情况通常是我们通过在网页中的form标签中设置enctype=”multipart/form-data”这样的信息，才可以。否则commons-fileupload和cos都不能获取到文件。HTML网页设置格式如下图所示：</p>
<pre class="brush: xml; title: ; notranslate" title="">&lt;html&gt;
&lt;body&gt;
&lt;h2&gt;Hello upload-file&lt;/h2&gt;
&lt;form method="POST" action="upload" enctype="multipart/form-data"&gt;
file upload:&lt;br&gt;
&lt;input type="file" name="file" /&gt;
&lt;input type="submit" value="submit"&gt;
&lt;/form&gt;
&lt;/body&gt;
&lt;/html&gt;

</pre>

<p>这只是一个简单例子，但如果我们遇到这样的情况：我们有一个java本地的客户端，使用HTTP协议来上传文件，不过这里没有表单。commons-fileupload的服务器端就会报错</p>
<p>其实解决的办法也很简单，面对没有设置”multipart/form-data”属性的客户端，我们可以通过request.getInputStream() 获取输入流，从中读取文件内容。</p>
<p>下面是我写的一断简单代码，把输入流信息，写入到C盘的一个文件：</p>
<pre class="brush: java; title: ; notranslate" title="">protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {

 InputStream input= request.getInputStream(); //获取流
 OutputStream out = new FileOutputStream(new File("c://test.txt"));
 byte[] buffer = new byte[1024];
 int count;
 while ((count = input.read(buffer)) != -1) {
 out.write(buffer, 0, count);  //写文件
 }
 out.flush();
 out.close();
 input.close();
 }

</pre>

<p>不过这种方式是不能直接解析上面那种form表单的文件上传方式，他会在文件的前后各加上一段信息,下面是一个form表单上传，输入流中的信息：</p>
<pre class="brush: xml; title: ; notranslate" title="">------WebKitFormBoundaryOPczhvGNCBlneBER
Content-Disposition: form-data; name="file"; filename="??????.txt"
Content-Type: text/plain
#下面是我写入的文件内容
df03c9cf37c5fbc5a7894e04297127d7
3a9bb0371ea5789666ab438b3b7e05c2
#到此为止
------WebKitFormBoundaryOPczhvGNCBlneBER--

</pre>

<p>如果form中没有加上enctype=”multipart/form-data”属性信息，输入流中得到的只有在&lt;input value=””&gt;中设置的value值，因此，通过流来获取上传的文件，应该只适合于从客户端直接向服务器写文件。</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://toozhao.com/2012/08/09/most-popular-free-repository/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Junv">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="http://blog.tuxue.xyz/libr.jpg?imageView2/1/w/200/h/200/q/90|imageslim">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="大染志">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2012/08/09/most-popular-free-repository/" itemprop="url">分享多个公网上著名的maven组件仓库</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2012-08-09T00:00:00+10:00">
                2012-08-09
              </time>
            

            
              <span class="post-meta-divider">|</span>
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-check-o"></i>
              </span>
              
                <span class="post-meta-item-text">更新于&#58;</span>
              
              <time title="更新于" itemprop="dateModified" datetime="2014-07-22T18:51:36+10:00">
                2014-07-22
              </time>
            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/java/" itemprop="url" rel="index">
                    <span itemprop="name">java</span>
                  </a>
                </span>

                
                
                  ， 
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/java/MAVEN/" itemprop="url" rel="index">
                    <span itemprop="name">MAVEN</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>我们都知道maven是项目构建的神器，不过用maven从国外下载东西的时候这速度可真就不怎么神器了。而且如果你在公司里面使用maven,而公司里面没有自己建一个maven代理仓库的话，大家一起使用maven下载组件的时候，就费力了。</p>
<p>因此一个公司是完全有必须要搭建一个maven代理仓库的。既可以节省宽带资源、也可以节省其他人编译相同代码说下载组件的时间，而且代理仓库服务器上的组件还可以随时复制、迁移到其他服务器，造福其他程序员。通常情况下，我们使用nexus搭建自己的maven仓库和做公网上那些用得很多的仓库的代理仓库，今天就在这里分享一些我搜集的公网上常用的代理仓库。这些已经能够保证我工作中的maven项目95%以上正常编译了。</p>
<blockquote>
<p>中央仓库：<a href="http://repo1.maven.org/maven2/" target="_blank" rel="external">http://repo1.maven.org/maven2/</a></p>
</blockquote>
<p>这个就是全世界最核心的maven仓库，相信大家都知道，nexus默认就已经提供。</p>
<blockquote>
<p>apache snapshots: <a href="http://repository.apache.org/snapshots/" target="_blank" rel="external">http://repository.apache.org/snapshots/</a></p>
</blockquote>
<p>apache 的快照组件仓库</p>
<blockquote>
<p>apache webservices :<a href="http://ws.zones.apache.org/repository2/" target="_blank" rel="external">http://ws.zones.apache.org/repository2/</a></p>
</blockquote>
<p>apache 的web services仓库，通常用得不多。</p>
<blockquote>
<p>codehaus snapshots:  <a href="http://nexus.codehaus.org/snapshots/" target="_blank" rel="external">http://nexus.codehaus.org/snapshots/</a></p>
<p>and ：<a href="http://snapshots.repository.codehaus.org/" target="_blank" rel="external">http://snapshots.repository.codehaus.org/</a></p>
</blockquote>
<p>另外一个比较著名的开源组织codehaus的快照仓库，貌似其中一个已经有一年多没有更新了。</p>
<blockquote>
<p>jenkins :<a href="http://repo.jenkins-ci.org/public/" target="_blank" rel="external">http://repo.jenkins-ci.org/public/</a></p>
</blockquote>
<p>开源项目jenkins 的仓库</p>
<blockquote>
<p>ops4j:<a href="http://repository.ops4j.org/maven2/" target="_blank" rel="external">http://repository.ops4j.org/maven2/</a></p>
</blockquote>
<p>开源项目ops4j的maven仓库</p>
<blockquote>
<p>nexus ：<a href="https://repository.sonatype.org/content/groups/forge/" target="_blank" rel="external">https://repository.sonatype.org/content/groups/forge/</a></p>
</blockquote>
<p>这是nexus自己的仓库，本身就包含了很过仓库仓库的代理，不过速度貌似不够快。</p>
<blockquote>
<p>spring external:<a href="http://repository.springsource.com/maven/bundles/external/" target="_blank" rel="external">http://repository.springsource.com/maven/bundles/external/</a></p>
<p>spring osgi:<a href="http://s3.amazonaws.com/maven.springframework.org/osgi/" target="_blank" rel="external">http://s3.amazonaws.com/maven.springframework.org/osgi/</a></p>
<p>spring release bundle:<a href="http://repository.springsource.com/maven/bundles/release/" target="_blank" rel="external">http://repository.springsource.com/maven/bundles/release/</a></p>
<p>spring release libs:<a href="http://repo.springsource.org/libs-release/" target="_blank" rel="external">http://repo.springsource.org/libs-release/</a></p>
<p>spring snapshots libs:<a href="http://repo.springsource.org/libs-snapshot/" target="_blank" rel="external">http://repo.springsource.org/libs-snapshot/</a></p>
</blockquote>
<p>spring 这个开源组织提供的仓库的确很多，而在我平时的编译中也经常用到，有一点spring 做得特别牛，那就是它吧很多一般的jar包转成了或者重新制作成了bundle。(bundle是osgi技术中需要的jar包，bundle可以当成普通jar包使用，而普通jar包不能当成bundle使用，举个简单的例子，如果你想把jar包放到你的osgi 应用服务器virgo 或者 jboss as 7中使用，你就必须得用bundle才可以。)所以当你找不到某个包的bundle版本的时候，试试去spring的maven仓库，他的所有包都是bundle.</p>
<blockquote>
<p>wso2：<a href="http://maven.wso2.org/nexus/content/groups/wso2-public/" target="_blank" rel="external">http://maven.wso2.org/nexus/content/groups/wso2-public/</a></p>
<p>wso2-2:<a href="http://dist.wso2.org/maven2/" target="_blank" rel="external">http://dist.wso2.org/maven2/</a></p>
</blockquote>
<p>wso2是一个企业级web services中间件，提供了很多，比较强大的组件。如AS， IS,ESB等。大家有兴趣可以看看。</p>
<p>把这样仓库全部做成你的nexus的代理，就相当于你拥有它们所有仓库的能力了。是不是瞬间战斗力提升了很多。</p>
<p>如果你想尽快使用你添加的这些代理仓库，请在nexus中更新这些仓库的 index(索引)，你就可以马上使用这些仓库了。</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://toozhao.com/2012/08/06/spring-data-mongodb-start/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Junv">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="http://blog.tuxue.xyz/libr.jpg?imageView2/1/w/200/h/200/q/90|imageslim">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="大染志">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2012/08/06/spring-data-mongodb-start/" itemprop="url">Spring Data MongoDB 简单使用</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2012-08-06T00:00:00+10:00">
                2012-08-06
              </time>
            

            
              <span class="post-meta-divider">|</span>
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-check-o"></i>
              </span>
              
                <span class="post-meta-item-text">更新于&#58;</span>
              
              <time title="更新于" itemprop="dateModified" datetime="2014-07-22T18:51:32+10:00">
                2014-07-22
              </time>
            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/java/" itemprop="url" rel="index">
                    <span itemprop="name">java</span>
                  </a>
                </span>

                
                
                  ， 
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/java/mongodb/" itemprop="url" rel="index">
                    <span itemprop="name">mongodb</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <blockquote>
<p><img class="alignnone" title="mongo" src="/images/2012/07/logo-mongoDB.png" alt="" width="217" height="90"></p>
</blockquote>
<p>这篇文章，主要是作为一个记录，记录我一个小时之前搞定这个东西的兴奋心情。spring mongodb主要是mongodb-java-driver 进行了一些封装，然后可以配合强大的spring使用。我觉得可以简单把它看成一个mongo的”ORM”框架。通过我从星期五到星期天的捣腾，我发现熟悉spring 框架本身其实是最重要的。好下面直接上吧：</p>
<p>首先我在eclipse里面建了一个maven项目，你需要添加如下依赖信息(这里用到的spring框架是3.0.6.RELEASE版本)：</p>
<pre class="brush: xml; title: ; notranslate" title="">&lt;properties&gt;
 &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;
 &lt;spring.version&gt;3.0.6.RELEASE&lt;/spring.version&gt;
 &lt;slf4j.version&gt;1.6.1&lt;/slf4j.version&gt;
 &lt;/properties&gt;

&lt;dependencies&gt;
 &lt;dependency&gt;
 &lt;groupId&gt;junit&lt;/groupId&gt;
 &lt;artifactId&gt;junit&lt;/artifactId&gt;
 &lt;version&gt;4.8.1&lt;/version&gt;
 &lt;scope&gt;test&lt;/scope&gt;
 &lt;/dependency&gt;
 &lt;dependency&gt;
 &lt;groupId&gt;org.springframework.data&lt;/groupId&gt;
 &lt;artifactId&gt;spring-data-mongodb&lt;/artifactId&gt;
 &lt;version&gt;1.0.2.RELEASE&lt;/version&gt;
 &lt;/dependency&gt;
 &lt;dependency&gt;
 &lt;groupId&gt;log4j&lt;/groupId&gt;
 &lt;artifactId&gt;log4j&lt;/artifactId&gt;
 &lt;version&gt;1.2.16&lt;/version&gt;
 &lt;/dependency&gt;
 &lt;dependency&gt;
 &lt;groupId&gt;org.slf4j&lt;/groupId&gt;
 &lt;artifactId&gt;slf4j-api&lt;/artifactId&gt;
 &lt;version&gt;${slf4j.version}&lt;/version&gt;
 &lt;/dependency&gt;
 &lt;dependency&gt;
 &lt;groupId&gt;org.slf4j&lt;/groupId&gt;
 &lt;artifactId&gt;jcl-over-slf4j&lt;/artifactId&gt;
 &lt;version&gt;${slf4j.version}&lt;/version&gt;
 &lt;/dependency&gt;
 &lt;dependency&gt;
 &lt;groupId&gt;org.slf4j&lt;/groupId&gt;
 &lt;artifactId&gt;slf4j-log4j12&lt;/artifactId&gt;
 &lt;version&gt;${slf4j.version}&lt;/version&gt;
 &lt;/dependency&gt;
 &lt;!-- Spring dependencies --&gt;
 &lt;dependency&gt;
 &lt;groupId&gt;org.springframework&lt;/groupId&gt;
 &lt;artifactId&gt;spring-core&lt;/artifactId&gt;
 &lt;version&gt;${spring.version}&lt;/version&gt;
 &lt;exclusions&gt;
 &lt;exclusion&gt;
 &lt;groupId&gt;commons-logging&lt;/groupId&gt;
 &lt;artifactId&gt;commons-logging&lt;/artifactId&gt;
 &lt;/exclusion&gt;
 &lt;/exclusions&gt;
 &lt;/dependency&gt;
 &lt;dependency&gt;
 &lt;groupId&gt;org.springframework&lt;/groupId&gt;
 &lt;artifactId&gt;spring-test&lt;/artifactId&gt;
 &lt;version&gt;${spring.version}&lt;/version&gt;
 &lt;scope&gt;test&lt;/scope&gt;
 &lt;exclusions&gt;
 &lt;exclusion&gt;
 &lt;groupId&gt;commons-logging&lt;/groupId&gt;
 &lt;artifactId&gt;commons-logging&lt;/artifactId&gt;
 &lt;/exclusion&gt;
 &lt;/exclusions&gt;
 &lt;/dependency&gt;
 &lt;dependency&gt;
 &lt;groupId&gt;org.springframework&lt;/groupId&gt;
 &lt;artifactId&gt;spring-context&lt;/artifactId&gt;
 &lt;version&gt;${spring.version}&lt;/version&gt;
 &lt;/dependency&gt;
 &lt;dependency&gt;
 &lt;groupId&gt;org.springframework&lt;/groupId&gt;
 &lt;artifactId&gt;spring-aop&lt;/artifactId&gt;
 &lt;version&gt;${spring.version}&lt;/version&gt;
 &lt;/dependency&gt;
 &lt;dependency&gt;
 &lt;groupId&gt;cglib&lt;/groupId&gt;
 &lt;artifactId&gt;cglib&lt;/artifactId&gt;
 &lt;version&gt;2.2&lt;/version&gt;
 &lt;/dependency&gt;
 &lt;dependency&gt;
 &lt;groupId&gt;org.mongodb&lt;/groupId&gt;
 &lt;artifactId&gt;mongo-java-driver&lt;/artifactId&gt;
 &lt;version&gt;2.8.0&lt;/version&gt;
 &lt;/dependency&gt;
 &lt;dependency&gt;
 &lt;groupId&gt;org.springframework.data&lt;/groupId&gt;
 &lt;artifactId&gt;spring-data-commons-core&lt;/artifactId&gt;
 &lt;version&gt;1.2.1.RELEASE&lt;/version&gt;
 &lt;/dependency&gt;
 &lt;/dependencies&gt;

</pre>

<p>由于这里面的某些依赖可能maven中央仓库没有，所以请在pom里添加下面两个spring的仓库:</p>
<pre class="brush: xml; title: ; notranslate" title="">&lt;repository&gt;
 &lt;id&gt;spring-maven-release&lt;/id&gt;
 &lt;name&gt;Spring Maven Release Repository&lt;/name&gt;
 &lt;url&gt;http://maven.springframework.org/release&lt;/url&gt;
 &lt;/repository&gt;
 &lt;repository&gt;
 &lt;id&gt;spring-maven-milestone&lt;/id&gt;
 &lt;name&gt;Spring Maven Milestone Repository&lt;/name&gt;
 &lt;url&gt;http://maven.springframework.org/milestone&lt;/url&gt;
 &lt;/repository&gt;

</pre>

<p>下面进行我们的代码编写,首先我们需要一个简单的java POJO类:person.java用于存储人的信息，其有三个属性：id(和mongodb中的ObjectId对应)，name-姓名，age-年龄。</p>
<pre class="brush: java; title: ; notranslate" title="">package com.toozhao.mongo.bean;

import org.springframework.data.annotation.Id;
import org.springframework.data.mongodb.core.mapping.Document;

/**
 *
 * @author Junv
 *
 */
@Document
public class Person {

@Id
 private String id;
 private String name;
 private int age;

public Person() {

}

public Person(String name, int age) {
 this.name = name;
 this.age = age;
 }

public String getId() {
 return id;
 }

public String getName() {
 return name;
 }

public void setId(String id) {
 this.id = id;
 }

public void setName(String name) {
 this.name = name;
 }

public void setAge(int age) {
 this.age = age;
 }

public int getAge() {
 return age;
 }

@Override
 public String toString() {
 return "Person [id=" + id + ", name=" + name + ", age=" + age + "]";
 }

}

</pre>

<p>然后我们定义一个执行操作的接口，和其实现类，这里可以看做是一个dao模式。在接口中我们只定义了保存对象和查询一条记录两个方法。</p>
<pre class="brush: java; title: ; notranslate" title="">package com.toozhao.mongo.repository;

import com.toozhao.mongo.bean.Person;
/**
 *
 * @author Junv
 *
 */
public interface MongoAction {

 public void saveObject(Person objToSave);

 public Person findObject(String id);

}

</pre>

<p>实现类：</p>
<pre class="brush: java; highlight: [11,14]; title: ; notranslate" title="">package com.toozhao.mongo.repository;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.data.mongodb.core.MongoOperations;
import org.springframework.data.mongodb.core.query.Criteria;
import org.springframework.data.mongodb.core.query.Query;
import org.springframework.stereotype.Repository;

import com.toozhao.mongo.bean.Person;

@Repository
public class PersonActionImp implements MongoAction {

@Autowired
 MongoOperations operation;

public void saveObject(Person objToSave) {
 operation.insert(objToSave);

}

public Person findObject(String id) {
 return operation.findOne(new Query(Criteria.where("_id").is(id)),
 Person.class);

}

}

</pre>

<p>@repository,和@autowired是spring框架中的，主要功能是起到类似反射的作用吧，具体我还没弄得很清楚。</p>
<p>写一个有main方法的java类，对功能进行简单测试：</p>
<pre class="brush: java; highlight: [20,21,23]; title: ; notranslate" title="">package com.toozhao.mongo;

import org.apache.commons.logging.Log;
import org.apache.commons.logging.LogFactory;
import org.springframework.context.ConfigurableApplicationContext;
import org.springframework.context.support.ClassPathXmlApplicationContext;

import com.toozhao.mongo.bean.Person;
import com.toozhao.mongo.repository.MongoAction;

public class MainTest {

private static final Log log = LogFactory.getLog(MainTest.class);

public static void main(String[] args) {

log.info("initial -----------------");
 ConfigurableApplicationContext context = null;
 //实例化appliaction Context对象
 context = new ClassPathXmlApplicationContext(
 "META-INF/spring/applicationContext.xml");
 //获取一个MongoAction Bean，以便后面执行相关操作
 MongoAction action = context.getBean(MongoAction.class);
 Person person = new Person("Tom", 11);

 action.saveObject(person);
 log.info("结果为：" + action.findObject(person.getId()));

}

}

</pre>

<p>最后，贴出applicationContext文档，里面主要对mongodb进行了简单的配置，和设置了repository的扫描目录（和@repository对应）。</p>
<pre class="brush: xml; highlight: [46]; title: ; notranslate" title="">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;beans xmlns="http://www.springframework.org/schema/beans"
 xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
 xmlns:context="http://www.springframework.org/schema/context"
 xmlns:mongo="http://www.springframework.org/schema/data/mongo"
 xsi:schemaLocation=
 "http://www.springframework.org/schema/context

http://www.springframework.org/schema/context/spring-context-3.0.xsd


http://www.springframework.org/schema/data/mongo


http://www.springframework.org/schema/data/mongo/spring-mongo-1.0.xsd


http://www.springframework.org/schema/beans


http://www.springframework.org/schema/beans/spring-beans-3.0.xsd"&gt;

 &lt;context:annotation-config/&gt;

&lt;context:component-scan base-package="com.toozhao.mongo.repository"&gt;
 &lt;context:exclude-filter type="annotation" expression="org.springframework.context.annotation.Configuration"/&gt;
 &lt;/context:component-scan&gt;

 &lt;!-- Default bean name is 'mongo' --&gt;
 &lt;mongo:mongo host="localhost" port="27017"&gt;
 &lt;mongo:options connections-per-host="8"
 threads-allowed-to-block-for-connection-multiplier="4"
 connect-timeout="1000"
 max-wait-time="1500"
 auto-connect-retry="true"
 socket-keep-alive="true"
 socket-timeout="1500"
 slave-ok="true"
 write-number="1"
 write-timeout="0"
 write-fsync="true"/&gt;
 &lt;/mongo:mongo&gt;
 &lt;!-- xml 配置mongoTemplate--&gt;
 &lt;bean id="mongoTemplate" class="org.springframework.data.mongodb.core.MongoTemplate"&gt;
 &lt;constructor-arg ref="mongo"/&gt;
 &lt;constructor-arg name="databaseName" value="junv"/&gt;
 &lt;/bean&gt;

 &lt;!-- Use this post processor to translate any MongoExceptions thrown in @Repository annotated classes --&gt;
 &lt;bean class="org.springframework.dao.annotation.PersistenceExceptionTranslationPostProcessor"/&gt;

&lt;/beans&gt;

</pre>

<p>当然你还需要做的就是运行这个项目，我们需要在pom.xml里面添加如下代码,<mainclass>为你需要运行的类：</mainclass></p>
<pre class="brush: xml; highlight: [7]; title: ; notranslate" title="">&lt;plugin&gt;
 &lt;groupId&gt;org.codehaus.mojo&lt;/groupId&gt;
 &lt;artifactId&gt;exec-maven-plugin&lt;/artifactId&gt;
 &lt;version&gt;1.1.1&lt;/version&gt;
 &lt;!-- 你需要执行的类， --&gt;
 &lt;configuration&gt;
 &lt;mainClass&gt;com.toozhao.mongo.MainTest&lt;/mainClass&gt;
 &lt;/configuration&gt;
 &lt;/plugin&gt;

</pre>

<p>最后，使用 mvn exec:java 就可以运行代码了，当然你在有main方法那个类，右键以java程序的方式也可以运行。结果就是你应该可以看到程序像数据库junv.person中插入了一条数据。</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://toozhao.com/2012/07/24/i-am-tired/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Junv">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="http://blog.tuxue.xyz/libr.jpg?imageView2/1/w/200/h/200/q/90|imageslim">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="大染志">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2012/07/24/i-am-tired/" itemprop="url">当这组长好累！</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2012-07-24T00:00:00+10:00">
                2012-07-24
              </time>
            

            
              <span class="post-meta-divider">|</span>
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-check-o"></i>
              </span>
              
                <span class="post-meta-item-text">更新于&#58;</span>
              
              <time title="更新于" itemprop="dateModified" datetime="2014-07-22T18:51:27+10:00">
                2014-07-22
              </time>
            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/我说/" itemprop="url" rel="index">
                    <span itemprop="name">我说</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>这个月，领导说我对程序仓库方面比较了解，所以让我当这方面的一个项目组长，负责nexus仓库的使用和改造等。</p>
<p>我们小组有4个人，我和另外一个是实习生，还有另外两位是实训生。就是这样一个小组，我们担负的任务是改造nexus。</p>
<p>但是到现在我感觉到的只有累。</p>
<p>每天感觉就像生活在使用maven编译项目的过程中。</p>
<p>所有需求不明确，只是领导和我们小组一起讨论过一次。也没有讨论出什么东西。下来，我按照讨论结果大概写了一个想法和预期的总结。发给了领导。但是就再也没有回应了。</p>
<p>我那个东西写得很简略，我也不知道哪些东西可以要，哪些应该深入。我也拿不定主义，可就是这样，我被要求写需求，画流程图，画用例图，我觉得很不知所措，我都不知道哪些东西应该做，哪些不应该做，这叫我怎么实现出来。</p>
<p>我不明白。我也不知道需求怎么写。恼火。</p>
<p>在编译和大概看nexus的源码的过程中，我们小组都发现，要成功编译它，还真不是一件容易的事。在看他代码吧。几十个MAVEN项目，几乎没什么说明，代理里面注释也不标准，也看不懂代码是怎么样一个结构。我只是想说这个项目太大了，真的太大了。大到我们不能承受地步，而且，我在网上搜，搜不出一条关于它的源码的解析。</p>
<p>nexus 也很无赖，很多东西很乱，有些前端文字，在专门的js里面，有些又随意分布。更可恶的是，它还有实时从后台下载文字等信息，显示出来。感觉这个公司真的很流氓。</p>
<p>我不想当组长了，我只是想安心搞我的技术。我技术都不够成熟。我才大四不到啊。我还想继续搞 我的技术。请让我把技术能力提升了以后再说其他的吧。我好累。好累。</p>
<p>这个组长不好当，更何况要我做的不是用一个项目，而是改人家一个没什么注释的代码。我伤不起。</p>
<p>who can help me?</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://toozhao.com/2012/07/22/html5-full-screen-api/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Junv">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="http://blog.tuxue.xyz/libr.jpg?imageView2/1/w/200/h/200/q/90|imageslim">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="大染志">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2012/07/22/html5-full-screen-api/" itemprop="url">HTML5 全屏(full screen)API</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2012-07-22T00:00:00+10:00">
                2012-07-22
              </time>
            

            
              <span class="post-meta-divider">|</span>
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-check-o"></i>
              </span>
              
                <span class="post-meta-item-text">更新于&#58;</span>
              
              <time title="更新于" itemprop="dateModified" datetime="2014-07-22T18:51:04+10:00">
                2014-07-22
              </time>
            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/HTML5/" itemprop="url" rel="index">
                    <span itemprop="name">HTML5</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>full screen (全屏)API,现在已经成为了HTML5的一个官方API，不过目前只是被chrome、firefox、safari浏览器实现了，且他们目前都是用的自行实现的函数，而非W3C官方标准的函数。建议在调用之前都检测一下！</p>
<p>full screen API主要有两个方法：一是执行全屏，另外一个则是退出全屏。他们的调用方法为：</p>
<p><strong>执行全屏</strong></p>
<pre class="brush: jscript; title: ; notranslate" title="">var element =  XXX      //这里你需要得到你的一个网页中的对象，可以是整个网页，或者其中一个节点

element.requestFullscreen();     //W3C的方法

element.mozRequestFullScreen();     //firefox实现的方法

element.webkitRequestFullScreen();     //chrome 和safari实现的方法

</pre>

<p><strong>退出全屏</strong></p>
<pre class="brush: jscript; title: ; notranslate" title="">element.exitFullScreen();     //W3C

element.mozCancelFullScreen();     //firefox

element.webkitCancelFullScreen();  //chrome和safari

</pre>

<p>例如,我想全屏整个页面,那个就应该使用:</p>
<pre class="brush: jscript; title: ; notranslate" title="">var documentEle = document.documentElement;

documentEle.webkitRequestFullScreen(); //chrome

</pre>

<p>此外我们还可以监听，full screen 事件，在其状态改变时执行相关操作。</p>
<pre class="brush: jscript; title: ; notranslate" title="">document.addEventListener("fullscreenchange", function () {}, false);  //w3c

document.addEventListener("mozfullscreenchange",function(){},false); //firefox

document.addEventListener("webkitfullscreenchange", function () {}, false);  //chrome 和safari

</pre>

<p>如果我们想获取当前某个对象数否处于全屏状态，就可以使用下面这个属性：</p>
<pre class="brush: jscript; title: ; notranslate" title="">document.fullScreen  //w3c

document.mozFullScreen //firefox

document.webkitIsFullScreen // chrome 和safari

</pre>

<p>经过我的测试（chrome 22），应该是HTML 里面所有对象都是可以被全屏的,如：<iframe>,<img>,<p>,网页本身。不过我们是不能一开始网页就让其处于全屏状态。而需要一些行为来触发这个事件。</p>
<p>在css 里面也有一个对应的选择器来修饰full screen：</p>
<pre class="brush: css; title: ; notranslate" title="">html:fullscreen{

font-size:30px;
color:white;
background:blue;

}

html:-moz-full-screen{
 font-size:30px;
 color:white;
 background:blue;
 }
 html:-webkit-full-screen{
 font-size:30px;
 color:white;
 background:blue;
 }

</pre>

<p>目前IE9 也是不支持full screen 全屏 API的，不知道在IE 10里面支持不！微软在这方面做得真的不怎么样啊。</p>
<blockquote>
<p><a href="http://toozhao.com/playground/fullscreen.html" title="full screen demo">点我查看我做的demo吧！</a>包含全屏网页，和全屏图片，不过由于图片原因效果不好。但是功能有了。哈哈！</p>
</blockquote>
</iframe></p>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://toozhao.com/2012/07/17/mongodb-getstart/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Junv">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="http://blog.tuxue.xyz/libr.jpg?imageView2/1/w/200/h/200/q/90|imageslim">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="大染志">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2012/07/17/mongodb-getstart/" itemprop="url">Mongodb 入门</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2012-07-17T00:00:00+10:00">
                2012-07-17
              </time>
            

            
              <span class="post-meta-divider">|</span>
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-check-o"></i>
              </span>
              
                <span class="post-meta-item-text">更新于&#58;</span>
              
              <time title="更新于" itemprop="dateModified" datetime="2014-07-22T18:51:00+10:00">
                2014-07-22
              </time>
            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/mongodb/" itemprop="url" rel="index">
                    <span itemprop="name">mongodb</span>
                  </a>
                </span>

                
                
                  ， 
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/mongodb/未分类/" itemprop="url" rel="index">
                    <span itemprop="name">未分类</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p><a href="/images/2012/07/logo-mongoDB.png"><img class="aligncenter size-full wp-image-2123" title="logo-mongoDB" src="/images/2012/07/logo-mongoDB.png" alt="" width="217" height="90"></a></p>
<p>Mongodb是一个非关系型数据库软件(NoSql),以类似json的形式bson存储数据,bson有二进制的json的意思,官方说bson的效率更高,很适合存储类似于对象的数据,这里权当把自己学习的过程记录下来.</p>
<p>首先是下载安装mongodb,请到<a href="http://www.mongodb.org/downloads" target="_blank" rel="external">这里</a>下载适合你操作系统的相应版本,这里我们以windows作为介绍.</p>
<p>将下载的压缩包解压到一个文件夹,我这里为 f:\mongodb</p>
<p>在mongodb文件夹下创建一个data文件夹,用于存储你的数据库文件.</p>
<p>下面就可以开始安装运行mongodb了,mongodb不需要进行安装,直接运行即可,进入命令行:</p>
<blockquote>
<p>cd f:\mongodb\bin</p>
<p>mongod.exe –dbpath=f:\mongodb\data</p>
</blockquote>
<p>–dbpath 为配置你的数据库文件路径,注意在等号附近不要空格哦,否则不能正常运行</p>
<p><a href="/images/2012/07/1_conew1.jpg"><img class="aligncenter size-full wp-image-2120" title="1_conew1" src="/images/2012/07/1_conew1.jpg" alt="" width="500" height="185"></a></p>
<p>这样mongodb的服务器端就已经成功运行起来了.下面运行客户端即可.mongodb默认是没有设置登录的用户名和密码,所以我们打开客户端,就可以直接连接上服务器.</p>
<blockquote>
<p>f:\mongodb\bin\mongo.exe</p>
</blockquote>
<p>如果连接成功, 你会看到会默认连上test数据库.(connectting to :test)</p>
<p>下面我们就可以进行一些简单的操作了.</p>
<blockquote>
<p>help    // 查看帮助信息</p>
<p>db.help()  //在当前数据库内的帮助信息</p>
<p>show dbs   //查看所有的数据库列表</p>
<p>use dbname    //dbname为你的数据库,如果你想创建一个新的数据库,将dbname写成一个不存在的数据库名称即可,mongodb会自动帮你创建数据库,同时起到切换数据库的作用</p>
</blockquote>
<p>在mongodb中没有我们通常说的”表”的概念,与表相对应的是”collection”,我们通常做到增删查改都是都与一个数据库中的collection而言的,在mongodb中不需要特意创建collection,如果我们使用的是一个没有的collection,系统便会自动创建</p>
<p>比如我们想插入一条数据:</p>
<pre class="brush: sql; title: ; notranslate" title="">db.mycollection.save({"name":"junv"});

</pre>

<p>系统便会自动生成名为mycollection的collection,并将数据存入其中.</p>
<p>我们也可以使用下面的话来达到同样的效果:</p>
<pre class="brush: sql; title: ; notranslate" title="">var tom = {"name": "junv"};

db.mycollection.save(tom);

</pre>

<p>我们可以使用 show collections 在查看当前数据库中所拥有的所有collection列表.</p>
<p>我们需要使用db.mycollection.find() 来查询其中的数据,如果我想查询”name” 为mary 的数据,就需要使用:</p>
<pre class="brush: sql; title: ; notranslate" title="">db.mycollection.find({"name":"mary"});

</pre>

<p>在一个collection 中,我们可以插入不同的数据,比如在mycollection中,我们还可以插入:</p>
<pre class="brush: sql; title: ; notranslate" title="">db.mycollection.insert({"city":"chegndu","nation":"china"});

</pre>

<p>这正是mongodb带来的优势.</p>
<p>如果我们查查询若干条数据,或者查询从n到m条数据,就需要使用:</p>
<pre class="brush: sql; title: ; notranslate" title="">db.mycollection.find().limit(n);

db.mycollection.find().limit(n,m)

</pre>

<p>当查询的数据过多而显示不完是,我们就需要使用 it 命令,来显示剩余部分.</p>
<p>更新数据，比如我们将“name”为mary的改为lily</p>
<pre class="brush: sql; title: ; notranslate" title="">var temp = db.mycollection.find({"name":"mary"});

temp.name = "lily";     //改变名字

db.mycollection.update({"name":"mary"},temp);  //保存

</pre>

<p>删除数据,将lily这条数据删除：</p>
<pre class="brush: sql; title: ; notranslate" title="">db.mycollection.remove({"name":"lily"});

</pre>

<p>删除所有数据:</p>
<pre class="brush: sql; title: ; notranslate" title="">db.mycollection.remove({})

</pre>


          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://toozhao.com/2012/07/13/compare-priority-of-maven-repository/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Junv">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="http://blog.tuxue.xyz/libr.jpg?imageView2/1/w/200/h/200/q/90|imageslim">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="大染志">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2012/07/13/compare-priority-of-maven-repository/" itemprop="url">深入比较几种maven仓库的优先级</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2012-07-13T00:00:00+10:00">
                2012-07-13
              </time>
            

            
              <span class="post-meta-divider">|</span>
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-check-o"></i>
              </span>
              
                <span class="post-meta-item-text">更新于&#58;</span>
              
              <time title="更新于" itemprop="dateModified" datetime="2014-07-22T18:50:57+10:00">
                2014-07-22
              </time>
            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/java/" itemprop="url" rel="index">
                    <span itemprop="name">java</span>
                  </a>
                </span>

                
                
                  ， 
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/java/MAVEN/" itemprop="url" rel="index">
                    <span itemprop="name">MAVEN</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>平时在使用maven下载依赖或者maven插件的时候，经常被本地仓库，settings里面profile中设置的仓库，mirror仓库，pom文件中的repository搞疯，因为很可能你就会因为这些你所设置的仓库不能正常编译项目。下面将和大家一起探讨和比较下这几种仓库的优先级别。</p>
<p>这里我们有三个仓库 ：</p>
<ul>
<li>远程222.197.xxx仓库</li>
<li>localhost镜像，是我自己在本机搭建的一个仓库</li>
<li>nexus仓库，是nexus官方的仓库</li>
</ul>
<p>首先考虑这样一种情况：maven本地仓库中拥有该包，而中央仓库、mirror仓库、profile仓库、pom中仓库均不含该包。我们可以看到maven直接首先从本地仓库中找到该包，编译成功。</p>
<p><a href="/images/2012/07/1.png"><img class="aligncenter size-large wp-image-2083" title="1" src="/images/2012/07/1-1024x267.png" alt="" width="1024" height="267"></a></p>
<p>由此可以看出，本地仓库拥有最高的优先级。</p>
<p>接下来，我们继续剩下的仓库的优先级，（下面所有情况，都默认本地不拥有我们需要的包）剩下的仓库都是远程仓库，这里我们设定mirror设置的镜像仓库是中央仓库的镜像。那么就可以把mirror当成中央仓库，因为其已经被mirror替换了。</p>
<p>这次的场景为：pom文件中定义的仓库（repository）（即远程：222.197.xxx）拥有该包，而mirror(localhost镜像)和profile（nexus仓库）中的仓库不拥有该包。进行测试：</p>
<p><a href="/images/2012/07/2.png"><img class="aligncenter size-large wp-image-2087" title="2" src="/images/2012/07/2-1024x267.png" alt="" width="1024" height="267"></a></p>
<p>从这个结果可以看出，maven首先调用了profile中的仓库，其次找到了pom文件中设置的仓库。而mirror没有出现。我们这里可以初步推测优先级别为：profile &gt; pom &gt; mirror，为了验证我们的判断，我们需要在进行一次测试来验证这个结果。</p>
<p>场景如下：mirror中拥有该包（222.197），而pom(localhost镜像)和profile（nexus仓库）中均不含有该包。进行测试：</p>
<p><a href="/images/2012/07/3.png"><img class="aligncenter size-large wp-image-2089" title="3" src="/images/2012/07/3-1024x319.png" alt="" width="1024" height="319"></a></p>
<p>实际情况的确验证了我们的猜想。那么我们得出这几种maven仓库的优先级别为：</p>
<blockquote>
<p>本地仓库 &gt;profile &gt; pom中的repository &gt; mirror</p>
</blockquote>
<p>注意：我也验证过这样的情况，将mirror这样设置：</p>
<pre class="brush: xml; title: ; notranslate" title="">&lt;mirror&gt;
&lt;id&gt;huacloud-central&lt;/id&gt;
&lt;mirrorOf&gt;*&lt;/mirrorOf&gt;
&lt;name&gt;name-of-this&lt;/name&gt;
&lt;url&gt;http://222.197.XXXXXX/nexus/content/groups/public/&lt;/url&gt;
 &lt;/mirror&gt;
</pre>

<p>即是表示该仓库地址为所有仓库的镜像，那么这个时候，maven会忽略掉其他设置的各种类型仓库仓库，只在mirror里面找。所以建议不要这样设置，他将导致pom文件中、pforile里面的仓库设置都失效。</p>
<blockquote>
<p>随便科普一下几种仓库的设置吧：</p>
</blockquote>
<p>pom中的repository:</p>
<pre class="brush: xml; title: ; notranslate" title="">&lt;repositories&gt;
&lt;repository&gt;
&lt;id&gt;dsdf&lt;/id&gt;
&lt;releases&gt;
&lt;enabled&gt;true&lt;/enabled&gt;
&lt;/releases&gt;
&lt;url&gt;http://222.197.XXXXXX/nexus/content/groups/public/&lt;/url&gt;
&lt;/repository&gt;
 &lt;/repositories&gt;
</pre>

<p>profile中的仓库是在maven的设置文件（maven安装目录/conf/settings.xml）</p>
<pre class="brush: xml; title: ; notranslate" title="">&lt;profile&gt;
 &lt;id&gt;nexus&lt;/id&gt;
 &lt;repositories&gt;
 &lt;repository&gt;
 &lt;id&gt;sonatype-forge&lt;/id&gt;
 &lt;url&gt;http://repository.sonatype.org/content/groups/forge/&lt;/url&gt;
 &lt;releases&gt;
 &lt;enabled&gt;true&lt;/enabled&gt;
 &lt;/releases&gt;
 &lt;snapshots&gt;
 &lt;enabled&gt;true&lt;/enabled&gt;
 &lt;/snapshots&gt;
 &lt;/repository&gt;
 &lt;/repositories&gt;
 &lt;pluginRepositories&gt;
 &lt;pluginRepository&gt;
 &lt;id&gt;sonatype-forge&lt;/id&gt;
 &lt;url&gt;http://repository.sonatype.org/content/groups/forge/&lt;/url&gt;
 &lt;releases&gt;
 &lt;enabled&gt;true&lt;/enabled&gt;
 &lt;/releases&gt;
 &lt;snapshots&gt;
 &lt;enabled&gt;true&lt;/enabled&gt;
 &lt;/snapshots&gt;
 &lt;/pluginRepository&gt;
 &lt;/pluginRepositories&gt;
 &lt;/profile&gt;
 &lt;/profiles&gt;

&lt;!-- 使用下面代码来激活profile--&gt;

&lt;activeProfiles&gt;
&lt;activeProfile&gt;nexus&lt;/activeProfile&gt;
 &lt;/activeProfiles&gt;
</pre>

<p>mirror设置上文有，这里不再赘述。欢迎留言讨论。</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://toozhao.com/2012/07/11/a-simple-nodejs-program/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Junv">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="http://blog.tuxue.xyz/libr.jpg?imageView2/1/w/200/h/200/q/90|imageslim">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="大染志">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2012/07/11/a-simple-nodejs-program/" itemprop="url">一个Nodejs写的简易订饭程序</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2012-07-11T00:00:00+10:00">
                2012-07-11
              </time>
            

            
              <span class="post-meta-divider">|</span>
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-check-o"></i>
              </span>
              
                <span class="post-meta-item-text">更新于&#58;</span>
              
              <time title="更新于" itemprop="dateModified" datetime="2014-07-22T18:50:52+10:00">
                2014-07-22
              </time>
            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/node-js/" itemprop="url" rel="index">
                    <span itemprop="name">node.js</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>因为公司最近开始不统一订饭了，但是我那么点工资到下面食堂去吃，既贵也吃不好，其他那些没工资的实训的同学就更伤不起了。为了脱离机械式的让每个人在纸上写上自己的名字。我用nodejs写了一个简单的程序来完成在网上订饭的功能。用户只需要进入网址。即可以完成订饭。这个程序是用nodejs+mysql完成的。使用了nodejs的 express和mysql包</p>
<p>使用下面的命令即可安装：</p>
<pre class="brush: xml; title: ; notranslate" title="">npm install express

npm install mysql

</pre>

<p>下面就附上代码吧，只有50多行，当然功能也很简单，只有订饭和查询所有已订饭的功能：</p>
<pre class="brush: jscript; title: ; notranslate" title="">&lt;p style="padding-left: 30px;"&gt;var express = require('express'),
 mysql = require('mysql');
var app = express.createServer();&lt;/p&gt;
&lt;p style="padding-left: 30px;"&gt;//create mysql client
var client = mysql.createClient({
 user:'root',
 password :'root'
});
//设置mysql属性
client.host ='127.0.0.1';
client.port = 3306;
client.database = 'orderfood';&lt;/p&gt;
&lt;p style="padding-left: 30px;"&gt;//拦截地址
app.get('/add/:name',function(req,res){
 var name = req.params.name;

 res.charset = 'utf-8';
 //查询数据库中是否已经有该用户的记录
 client.query('select * from orders where name= ?',[name],function(err,results,fields){
 if(err) throw err;
 //阻止用户多次提交
 if(results[0]!==undefined){
 res.send('哈哈，'+results[0].name+'小子！你想重复提交吗？没门！！\n');
 return ;
 }else{
 //将数据存入数据库中
 client.query('insert into orders(name) values(?)',[name],function(err,results,fileds){
 if(err) throw err;
 console.log("你的名字为"+name);
 res.write("恭喜你订餐成功！你的名字为"+name +"\n");
 });
 client.query('select * from orders',function(err,results,fileds){
 if(err) throw err;
 if(results[0]!==undefined){
 var count=0;
 res.write("=================已定名单====================\n");
 for(var i=0;i&lt;results.length;i++){
 res.write("姓名："+results[i].name+"————————————订饭时间："+results[i].time+"\n");
 res.write('\n');
 count++;
 }
 res.write("*****************已订饭人数为："+count+"********************");
 res.end();
 return ;
 }
 res.send("已订名单为空！\n");
 });
 }
 });
 });
//设置404页面
app.get('*', function(req, res){
 res.send('小样 ，出错了！！我来自node.js哦', 404);
});
//监听3000端口
app.listen(80);
console.log("server listen on port 80");&lt;/p&gt;
</pre>

<p>格式可能有点问题哈。</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/4/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/4/">4</a><span class="page-number current">5</span><a class="page-number" href="/page/6/">6</a><span class="space">&hellip;</span><a class="page-number" href="/page/31/">31</a><a class="extend next" rel="next" href="/page/6/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview sidebar-panel sidebar-panel-active">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="http://blog.tuxue.xyz/libr.jpg?imageView2/1/w/200/h/200/q/90|imageslim"
               alt="Junv" />
          <p class="site-author-name" itemprop="name">Junv</p>
           
              <p class="site-description motion-element" itemprop="description">Go, JavaScript, Ruby on Rails, Java,Docker, CI, CD, Photography</p>
          
        </div>
        <nav class="site-state motion-element">

          
            <div class="site-state-item site-state-posts">
            
              <a href="/archives/">
            
                <span class="site-state-item-count">307</span>
                <span class="site-state-item-name">日志</span>
              </a>
            </div>
          

          
            
            
            <div class="site-state-item site-state-categories">
              <a href="/categories/index.html">
                <span class="site-state-item-count">69</span>
                <span class="site-state-item-name">分类</span>
              </a>
            </div>
          

          
            
            
            <div class="site-state-item site-state-tags">
              <a href="/tags/index.html">
                <span class="site-state-item-count">247</span>
                <span class="site-state-item-name">标签</span>
              </a>
            </div>
          

        </nav>

        

        <div class="links-of-author motion-element">
          
            
              <span class="links-of-author-item">
                <a href="https://github.com/wahyd4" target="_blank" title="GitHub">
                  
                    <i class="fa fa-fw fa-github"></i>
                  
                    
                      GitHub
                    
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="https://www.linkedin.com/in/junwei-zhao-46944557" target="_blank" title="LinkedIn">
                  
                    <i class="fa fa-fw fa-linkedin"></i>
                  
                    
                      LinkedIn
                    
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="https://stackoverflow.com/users/1140611/junv" target="_blank" title="StackOverflow">
                  
                    <i class="fa fa-fw fa-stack-overflow"></i>
                  
                    
                      StackOverflow
                    
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="http://weibo.com/wahyd4" target="_blank" title="Weibo">
                  
                    <i class="fa fa-fw fa-weibo"></i>
                  
                    
                      Weibo
                    
                </a>
              </span>
            
          
        </div>

        
        

        
        

        


      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2020</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Junv</span>

  
</div>



        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.2"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.2"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.2"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.2"></script>



  
    <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.2"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.2"></script>

  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.2"></script>



  


  




	





  





  








  





  

  

  

  

  

  

</body>
</html>
